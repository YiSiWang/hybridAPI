!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var i in t)("object"==typeof exports?exports:e)[i]=t[i]}}(this,function(){return function(e){function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var t={};return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=3)}([function(e,n,t){"use strict";t.d(n,"a",function(){return a});var i,r=window.navigator.userAgent;if(/eleme/i.test(r)){var o=r.match(/Eleme\/([0-9]+)\.([0-9]+)/i);i=100*Number(o[1])+Number(o[2])}var a=i<509},function(e,n,t){!function(e,t){t(n)}(this,function(e){"use strict";var n=function(){var e=navigator.userAgent||navigator.vendor;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"Unknown"},t=function(e){var n=document.createEvent("Events");n.initEvent("WebViewJavascriptBridgeReady"),n.bridge=e,document.dispatchEvent(n)},i={},r="elmscheme",o="__ELM_QUEUE_MESSAGE__",a="elemejsbridge",c="_handler",u="_interface",s=n(),d={},l=void 0,f=function(){l=document.createElement("iframe"),l.style.display="none","iOS"===s&&(l.src=r+"://"+o),document.documentElement.appendChild(l)},p=1,v=[],g=function(e,n,t){if(n){var c="cb_"+p++ +"_"+(new Date).getTime();i[c]=n,e.callbackId=c}v.push(e);var u=JSON.stringify(v);"iOS"===s?l.src=r+"://"+o:(l.src=a+"://return/"+t+"/"+encodeURIComponent(u),v=[])},w=function(){var e=JSON.stringify(v);return v=[],e},m=function(e,n){d[e]=n},h=function(e){return d[e]},b=function(e,n,t){g({handlerName:e,data:n},t,c)},y=function(e,n,t,i){var r={obj:e,method:n};"undefined"!=typeof t&&null!==t&&(r.data=t),g(r,i,u)},_="_response",E=function(e){var n=JSON.parse(e),t=void 0;if(n.responseId)t=i[n.responseId],"function"==typeof t&&t(n.responseData||n.data),delete i[n.responseId];else{if(n.callbackId){var r=n.callbackId;t=function(e){g({responseId:r,data:e},null,_)}}var o=WebViewJavascriptBridge._messageHandler;n.handlerName&&(o=h(n.handlerName));try{o(n.data,t)}catch(e){"undefined"!=typeof console&&console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",n,e)}}},J=[],j=function(e){J?J.push(e):E(e)},x=!1,B=function(e){if(x)throw new Error("WebViewJavascriptBridge.init called twice");if(window.WebViewJavascriptBridge&&(window.WebViewJavascriptBridge._messageHandler=e,x=!0,J)){for(var n=0;n<J.length;n++)E(J[n]);J=null}},O=function(e,n){var t=window[e]={},i=function(n){n=n.replace(new RegExp(":","g"),""),t[n]=function(){var t=arguments.length;if(t>2)throw new Error("arguments Error");var i=arguments[0]||null,r=arguments[1]||null;1===t&&"function"==typeof i&&(r=i,i=null),y(e,n,i,r)}};(n||[]).forEach(i)},S=function(){var e=document.createEvent("Events");e.initEvent("WebViewJavascriptBridgeInjectFinishedReady"),document.dispatchEvent(e)},I=function(){};I.init=B,I.inject=O,I.injectEvent=S,I.registerHandler=m,I.callHandler=b;var P=n();"iOS"===P?(I._fetchQueue=w,I._handleMessageFromObjC=j):"Android"===P?I._handleMessageFromNative=j:console.warn("Error: "+P+" is not supported."),window.WebViewJavascriptBridge=I,f(),t(I),B(),e.inject=O,e.registerHandler=m,e.callHandler=b,e.callObjectMethod=y})},function(e,n,t){"use strict";var i=t(0);t.d(n,"b",function(){return r}),t.d(n,"e",function(){return o}),t.d(n,"a",function(){return a}),t.d(n,"c",function(){return c}),t.d(n,"d",function(){return u});var r=function(e){try{return JSON.parse(e)||{}}catch(e){return!1}},o=function(e){return Object.keys(e).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])}).join("&")},a=function(e){var n=e instanceof Object?Object.prototype.toString.call(e):"";return"[object Function]"===n||"[object GeneratorFunction]"===n},c=function(e){for(var n=[],t=arguments.length-1;t-- >0;)n[t]=arguments[t+1];var r,o=n[n.length-1];o&&o.isReject&&(r=n.pop());var a=window.WebViewJavascriptBridge,c=i.a?"WebViewJavascriptBridgeInjectFinishedReady":"WebViewJavascriptBridgeReady",u=function(){a=window.WebViewJavascriptBridge;try{a.init()}catch(e){}setTimeout(function(){try{window.EJsBridge&&window.EJsBridge[e]?window.EJsBridge[e].apply(window.EJsBridge,n):window.JsBridge&&window.JsBridge[e]?window.JsBridge[e].apply(window.JsBridge,n):a&&a.callHandler.apply(a,[e].concat(n))}catch(e){r&&r(e)}},0)};window.EJsBridge||window.JsBridge||a?u():document.addEventListener(c,u)},u=function(e,n){for(var t=[],i=arguments.length-2;i-- >0;)t[i]=arguments[i+2];n.isReject=!0,c.apply(void 0,[e].concat(t,[n]))}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),r=t(2),o=t(1),a=t.n(o);if(!i.a){var c=["getGlobalGeohash","showShareButton","selectedHongbao","selectHongbao","selectCoupon","getLocateStatus","setTitle","closePage","getUserID"];a.a.inject("EJsBridge",c)}n.default={getGlobalGeohash:function(e){var n=i.a?[""]:[];return t.i(r.a)(e)?(n.push(function(n){e(t.i(r.b)(n)||n)}),void r.c.apply(void 0,["getGlobalGeohash"].concat(n))):new Promise(function(e,i){n.push(function(n){e(t.i(r.b)(n)||n)});try{r.d.apply(void 0,["getGlobalGeohash",i].concat(n))}catch(e){i(e)}})},share:function(e){if(i.a){var n=["0","1","2"],o=n.map(function(n){return"eleme://share?"+t.i(r.e)({type:n,title:e.title,text:"2"===n?e.weibo||e.text:e.text,url:e.url,image_url:e.image_url})});t.i(r.c)("showShareButton",{weixin_session:o[0],weixin_timeline:o[1],weibo:o[2]})}else document.head.insertAdjacentHTML("afterbegin",'<meta name="eleme-share">\n        <meta name="eleme-share:title" content="'+e.title+'">\n        <meta name="eleme-share:description" content="'+e.text+'">\n        <meta name="eleme-share:image" content="'+e.image_url+'">')},selectHongbao:function(e){t.i(r.c)(i.a?"selectedHongbao":"selectHongbao",e,i.a?function(){}:null)},selectCoupon:function(e){t.i(r.c)("selectCoupon",""+e)},getLocateStatus:function(e){return t.i(r.a)(e)?void t.i(r.c)("getLocateStatus",e):new Promise(function(e,n){try{t.i(r.d)("getLocateStatus",n,function(n){e(n)})}catch(e){n(e)}})},setTitle:function(e){t.i(r.c)("setTitle",e)},closePage:function(){t.i(r.c)("closePage")},getUserID:function(e){return t.i(r.a)(e)?void t.i(r.c)("getUserID",e):new Promise(function(e,n){try{t.i(r.d)("getUserID",n,function(n){e(n)})}catch(e){n(e)}})},sharePanel:function(e){var n={weixin:{key:"weixin_session",value:0},weixin_timeline:{key:"weixin_timeline",value:1},weibo:{key:"weibo",value:2},qq:{key:"qq_session",value:4},qzone:{key:"qzone_session",value:5}},i=e.url+(~e.url.indexOf("#")||~e.url.indexOf("?")?"&":"?"),o=e.targets.reduce(function(o,a){return o[n[a].key]="eleme://share?"+t.i(r.e)({type:n[a].value,title:e.title,text:2===n[a].value?e.title+", "+e.text+"。分享链接："+i+"type="+a:e.text,url:i+"type="+a,image_url:e.image_url}),o},{});location.href="eleme://sns_share?source="+e.source+"&"+t.i(r.e)(o)}}}])});