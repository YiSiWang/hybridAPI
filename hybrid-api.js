!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.hybridAPI=t():e.hybridAPI=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";var i=n(1);n.d(t,"b",function(){return o}),n.d(t,"e",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return u});var o=function(e){try{return JSON.parse(e)||{}}catch(e){return!1}},r=function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},a=function(e){var t=e instanceof Object?Object.prototype.toString.call(e):"";return"[object Function]"===t||"[object GeneratorFunction]"===t},c=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var o,r=t[t.length-1];r&&r.isReject&&(o=t.pop());var a=window.WebViewJavascriptBridge,c=i.a?"WebViewJavascriptBridgeInjectFinishedReady":"WebViewJavascriptBridgeReady",u=function(){a=window.WebViewJavascriptBridge;try{a.init()}catch(e){}setTimeout(function(){try{window.EJsBridge&&window.EJsBridge[e]?window.EJsBridge[e].apply(window.EJsBridge,t):window.JsBridge&&window.JsBridge[e]?window.JsBridge[e].apply(window.JsBridge,t):a&&a.callHandler.apply(a,[e].concat(t))}catch(e){o&&o(e)}},0)};window.EJsBridge||window.JsBridge||a?u():document.addEventListener(c,u)},u=function(e,t){for(var n=[],i=arguments.length-2;i-- >0;)n[i]=arguments[i+2];t.isReject=!0,c.apply(void 0,[e].concat(n,[t]))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i,o=window.navigator.userAgent;if(/eleme/i.test(o)){var r=o.match(/Eleme\/([0-9]+)\.([0-9]+)/i);i=100*Number(r[1])+Number(r[2])}var a=i<509},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";var t=function(){var e=navigator.userAgent||navigator.vendor;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"Unknown"},n=function(e){var t=document.createEvent("Events");t.initEvent("WebViewJavascriptBridgeReady",!0,!0),t.bridge=e,document.dispatchEvent(t)},i={},o="elmscheme",r="__ELM_QUEUE_MESSAGE__",a="elemejsbridge",c="_handler",u="_interface",s=t(),d={},l=void 0,f=function(){l=document.createElement("iframe"),l.style.display="none","iOS"===s&&(l.src=o+"://"+r),document.documentElement.appendChild(l)},h=1,v=[],m=function(e,t,n){if(t){var c="cb_"+h++ +"_"+(new Date).getTime();i[c]=t,e.callbackId=c}v.push(e);var u=JSON.stringify(v);"iOS"===s?l.src=o+"://"+r:(l.src=a+"://return/"+n+"/"+encodeURIComponent(u),v=[])},p=function(){var e=JSON.stringify(v);return v=[],e},g=function(e,t){d[e]=t},w=function(e){return d[e]},b=function(e,t,n){m({handlerName:e,data:t},n,c)},y=function(e,t,n,i){var o={obj:e,method:t};"undefined"!=typeof n&&null!==n&&(o.data=n),m(o,i,u)},_="_response",B=function(e){var t=JSON.parse(e),n=void 0;if(t.responseId)n=i[t.responseId],"function"==typeof n&&n(t.responseData||t.data),delete i[t.responseId];else{if(t.callbackId){var o=t.callbackId;n=function(e){m({responseId:o,data:e},null,_)}}var r=WebViewJavascriptBridge._messageHandler;t.handlerName&&(r=w(t.handlerName));try{r(t.data,n)}catch(e){"undefined"!=typeof console&&console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",t,e)}}},k=[],E=function(e){k?k.push(e):B(e)},x=!1,j=function(e){if(x)throw new Error("WebViewJavascriptBridge.init called twice");if(window.WebViewJavascriptBridge&&(window.WebViewJavascriptBridge._messageHandler=e,x=!0,k)){for(var t=0;t<k.length;t++)B(k[t]);k=null}},P=function(e,t){var n=window[e]={},i=function(t){t=t.replace(new RegExp(":","g"),""),n[t]=function(){var n=arguments.length;if(n>2)throw new Error("arguments Error");var i=arguments[0]||null,o=arguments[1]||null;1===n&&"function"==typeof i&&(o=i,i=null),y(e,t,i,o)}};(t||[]).forEach(i)},O=function(){var e=document.createEvent("Events");e.initEvent("WebViewJavascriptBridgeInjectFinishedReady",!0,!0),document.dispatchEvent(e)},J=function(){};J.init=j,J.inject=P,J.injectEvent=O,J.registerHandler=g,J.callHandler=b;var I=t();"iOS"===I?(J._fetchQueue=p,J._handleMessageFromObjC=E):"Android"===I?J._handleMessageFromNative=E:console.warn("Error: "+I+" is not supported."),window.WebViewJavascriptBridge=J,f(),n(J),j(),e.inject=P,e.registerHandler=g,e.callHandler=b,e.callObjectMethod=y,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";var i=n(0);n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var o=Object.create(null),r=function(e,t){document[e+"EventListener"](t,o[t],!1)},a=function(e){var t=e.eventName,a=e.action;"function"==typeof o[t]&&r("remove",t),o[t]=function(e){setTimeout(function(){a(e.detail)},0)},r("add",t),n.i(i.c)("hookGoback",t)},c=function(){n.i(i.c)("hookGoback",null),Object.keys(o).forEach(function(e){r("remove",e),delete o[e]})}},function(e,t,n){"use strict";var i=n(0),o=~~document.querySelector("html").getAttribute("data-dpr")||1,r=window.devicePixelRatio||1,a=function(e){return void 0===e&&(e=0),~~(e*o/r)},c=function(e){return void 0===e&&(e={}),{status_bar:a(e.status_bar),nav_bar:a(e.nav_bar)}};t.a=function(e){return n.i(i.a)(e)?void n.i(i.c)("defaultHeightOfTopBar",function(t){e(c(t))}):new Promise(function(e,t){try{n.i(i.d)("defaultHeightOfTopBar",t,function(t){e(c(t))})}catch(e){t(e)}})}},function(e,t,n){"use strict";var i=n(0);t.a=function(e,t){return n.i(i.a)(t)?void n.i(i.c)("contactList",e,function(e){t(e)}):new Promise(function(t,o){try{n.i(i.d)("contactList",o,e,function(e){t(e)})}catch(e){o(e)}})}},function(e,t,n){"use strict";var i=n(0);n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var o=Object.create(null),r=function(e,t){document[e+"EventListener"](t,o[t],!1)},a=function(e){var t=[];e.forEach(function(e){var n=e.eventName,i=function(){setTimeout(e.action,0)};"function"==typeof o[n]&&r("remove",n),o[n]=i,r("add",n),t.push({title:e.text,eventName:n})}),n.i(i.c)("showRightBarItems",t)},c=function(){n.i(i.c)("removeRightBarItems"),Object.keys(o).forEach(function(e){r("remove",e),delete o[e]})}},function(e,t,n){"use strict";n(0);t.a=function(e){var t=e.eventName,n=e.action,i=e.merchantId,o=e.merchantOrderNo,r=e.xShard;t=t||"NATIVE_PAY_CALLBACk",document.addEventListener(t,function(e){var t=e.detail,i={};i.merchantId=t.merchant_id,i.merchantOrderNo=t.merchant_order_no,i.status=t.status,n(i)},!1);var a="eleme://pay?merchant_id="+i+"&merchant_order_no="+o+"&event_name="+t;r&&(a+="&x_shard="+r),location.href=a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),r=n(2),a=(n.n(r),n(6)),c=n(3),u=n(7),s=n(4),d=n(5);if(!i.a){var l=["getGlobalGeohash","showShareButton","selectedHongbao","selectHongbao","selectCoupon","getLocateStatus","setTitle","closePage","getUserID","showRightBarItems","removeRightBarItems","hookGoback","shouldShowNewRetailRedBadge","networkType","exitConfirm","checkPackages","openPackage","defaultHeightOfTopBar","contactList"];r.inject("EJsBridge",l)}t.default={getGlobalGeohash:function(e){var t=i.a?[""]:[];return n.i(o.a)(e)?(t.push(function(t){e(n.i(o.b)(t)||t)}),void o.c.apply(void 0,["getGlobalGeohash"].concat(t))):new Promise(function(e,i){t.push(function(t){e(n.i(o.b)(t)||t)});try{o.d.apply(void 0,["getGlobalGeohash",i].concat(t))}catch(e){i(e)}})},share:function(e){if(i.a){var t=["0","1","2"],r=t.map(function(t){return"eleme://share?"+n.i(o.e)({type:t,title:e.title,text:"2"===t?e.weibo||e.text:e.text,url:e.url,image_url:e.image_url})});n.i(o.c)("showShareButton",{weixin_session:r[0],weixin_timeline:r[1],weibo:r[2]})}else document.head.insertAdjacentHTML("afterbegin",'<meta name="eleme-share">\n        <meta name="eleme-share:title" content="'+e.title+'">\n        <meta name="eleme-share:description" content="'+e.text+'">\n        <meta name="eleme-share:image" content="'+e.image_url+'">')},selectHongbao:function(e){n.i(o.c)(i.a?"selectedHongbao":"selectHongbao",e,i.a?function(){}:null)},selectCoupon:function(e){n.i(o.c)("selectCoupon",""+e)},getLocateStatus:function(e){return n.i(o.a)(e)?void n.i(o.c)("getLocateStatus",e):new Promise(function(e,t){try{n.i(o.d)("getLocateStatus",t,function(t){e(t)})}catch(e){t(e)}})},networkType:function(e){return n.i(o.a)(e)?void n.i(o.c)("networkType",e):new Promise(function(e,t){try{n.i(o.d)("networkType",t,function(e){resulve(e)})}catch(e){t(e)}})},setTitle:function(e){n.i(o.c)("setTitle",e)},closePage:function(){n.i(o.c)("closePage")},exitConfirm:function(e){n.i(o.c)("exitConfirm",e)},getUserID:function(e){return n.i(o.a)(e)?void n.i(o.c)("getUserID",e):new Promise(function(e,t){try{n.i(o.d)("getUserID",t,function(t){e(t)})}catch(e){t(e)}})},sharePanel:function(e){var t={weixin:{key:"weixin_session",value:0},weixin_timeline:{key:"weixin_timeline",value:1},weibo:{key:"weibo",value:2},qq:{key:"qq_session",value:4},qzone:{key:"qzone_session",value:5}},i=e.url+(~e.url.indexOf("#")||~e.url.indexOf("?")?"&":"?"),r=e.targets.reduce(function(r,a){return r[t[a].key]="eleme://share?"+n.i(o.e)({type:t[a].value,title:e.title,text:2===t[a].value?e.title+", "+e.text+"。分享链接："+i+"type="+a:e.text,url:i+"type="+a,image_url:e.image_url}),r},{});location.href="eleme://sns_share?source="+e.source+"&"+n.i(o.e)(r)},checkPackages:function(e,t){return n.i(o.a)(t)?void n.i(o.c)("checkPackages",e,t):new Promise(function(t,i){try{n.i(o.d)("checkPackages",e,i,function(e){resulve(e)})}catch(e){i(e)}})},openPackage:function(e){n.i(o.c)("openPackage",e)},setRightMenu:a.a,clearRightMenu:a.b,hookBack:c.a,cancelHookBack:c.b,shouldShowNewRetailRedBadge:function(e){return n.i(o.a)(e)?void n.i(o.c)("shouldShowNewRetailRedBadge",e):new Promise(function(e,t){try{n.i(o.d)("shouldShowNewRetailRedBadge",t,function(t){e(t)})}catch(e){t(e)}})},pay:u.a,getTopBarHeight:s.a,contactList:d.a}}])});